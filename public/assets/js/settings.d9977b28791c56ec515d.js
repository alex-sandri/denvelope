!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var a;n.d(t,"u",(function(){return o})),n.d(t,"v",(function(){return r})),n.d(t,"m",(function(){return i})),n.d(t,"n",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"s",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"p",(function(){return m})),n.d(t,"r",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return b})),n.d(t,"t",(function(){return y})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return S})),n.d(t,"q",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return C})),n.d(t,"o",(function(){return E}));const o=(e,t)=>{e.style.display=null!=t?t:"block"},r=(e,t)=>e.forEach(e=>o(e,t)),i=e=>{e.style.display="none"},l=e=>e.forEach(e=>i(e)),s=(e,t)=>e.classList.add(t),c=(e,t)=>t.filter(e=>e.length>0).forEach(t=>s(e,t)),d=(e,t)=>e.classList.remove(t),u=(e,t)=>e.classList.contains(t),m=e=>null!=e,p=()=>{document.addEventListener("drag",e=>e.preventDefault()),document.addEventListener("dragend",e=>e.preventDefault()),document.addEventListener("dragenter",e=>e.preventDefault()),document.addEventListener("dragexit",e=>e.preventDefault()),document.addEventListener("dragleave",e=>e.preventDefault()),document.addEventListener("dragover",e=>e.preventDefault()),document.addEventListener("dragstart",e=>e.preventDefault()),document.addEventListener("drop",e=>e.preventDefault())},h=e=>window.dispatchEvent(new Event(e)),g=e=>{let t="",n=0,a=e;for(n=0;a>=1e3;n++)a/=1e3;switch(n){case 0:t="B";break;case 1:t="KB";break;case 2:t="MB";break;case 3:t="GB";break;case 4:t="TB";break;case 5:t="PB";break;case 6:t="EB";break;case 7:t="ZB";break;case 8:t="YB"}return+a.toFixed(2)+t},f=(e,t)=>new Date(e).toLocaleDateString(document.documentElement.lang,t||{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}),v=e=>{let t=document.querySelector("input[name=folder-id]").value;return"trash"!==t&&"starred"!==t&&"shared"!==t&&"vault"!==t||m(e)&&e||(t="root"),t},b=async e=>new Promise(t=>{""!==v(e).trim()&&t(v(e)),document.querySelector("input[name=folder-id]").addEventListener("change",()=>t(v(e)),{once:!0})}),y=e=>{document.querySelector("input[name=folder-id]").value=e},_=()=>firebase.firestore.FieldValue.serverTimestamp(),S=()=>({updated:_(),lastClientUpdateTime:new firebase.firestore.Timestamp.now}),w=(null===(a=window.trustedTypes)||void 0===a||a.createPolicy("escapePolicy",{createHTML:e=>(e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\//g,"&#x2F;"))(e)}),()=>firebase.analytics().logEvent("page_view",{page_location:location.href,page_path:location.pathname,page_title:document.title,offline:!navigator.onLine,isPwa:navigator.standalone||window.matchMedia("(display-mode: standalone)").matches})),k=()=>indexedDB.deleteDatabase("firestore/[DEFAULT]/denvelope-firebase/main"),C=()=>{k(),indexedDB.deleteDatabase("firebase-installations-database"),indexedDB.deleteDatabase("firebaseLocalStorageDb");const e=localStorage.getItem("lang");localStorage.clear(),localStorage.setItem("cookie-consent","true"),localStorage.setItem("lang",e)},E=e=>0===(e=>{switch(e){case"1GB":return 1;case"10GB":return 2;default:return 0}})(g(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));var a=n(0);class o{constructor(e,t){if(this.type=e,this.options=t,this.element=document.createElement(e),Object(a.p)(t)){if(t.aria&&(Array.from(Object.keys(t.aria)).forEach((e,n)=>this.element.setAttribute(`aria-${e}`,Object.values(t.aria)[n])),delete t.aria),t.children&&(t.children.forEach(e=>this.element.appendChild(e)),delete t.children),t.data&&(Array.from(Object.keys(t.data)).forEach((e,n)=>this.element.setAttribute(`data-${e}`,Object.values(t.data)[n])),delete t.data),t.style){const e={};if(Array.from(Object.keys(t.style)).filter(e=>![":hover",":focus"].includes(e)).forEach((n,a)=>{this.element.style[n]=e[n]=Object.values(t.style)[a]}),t.style[":hover"]){const n=t.style[":hover"];Array.from(Object.keys(n)).forEach((t,o)=>{this.element.addEventListener("mouseenter",()=>{Object(a.l)(this.element,"no-hover")||(this.element.style[t]=Object.values(n)[o])}),this.element.addEventListener("mouseleave",()=>{this.element.style[t]=e[t]||""})})}delete t.style}t.innerText&&(this.element.innerText=t.innerText,delete t.innerText),Array.from(Object.keys(t)).forEach((e,n)=>this.element.setAttribute(e,Object.values(t)[n]))}}}class r extends o{constructor(e){super("div",{class:Object(a.p)(e.class)?e.class:"input",children:[new o("input",{...e.attributes}).element,...e.children||[]]}),this.options=e}}class i extends r{constructor(e){var t;super({class:"input-with-icon",children:[new o("div",{class:"input-icon",aria:{hidden:!0},tabindex:-1,children:[new o("i",{class:e.iconClassName}).element]}).element],attributes:e.attributes}),this.options=e,"password"===(null===(t=e.attributes)||void 0===t?void 0:t.type)&&this.element.querySelector(".input-icon").addEventListener("click",()=>{this.element.querySelector("input").type="password"===this.element.querySelector("input").type?"text":"password"})}}class l extends o{constructor(){super("span",{class:"spinner",children:[new o("i",{class:"fas fa-circle-notch fa-fw"}).element]})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a={language:{name:"English (United States)"},accessibility:{keyboard_shortcuts:"Keyboard shortcuts",view_account_content:"View account content",view_shared_content:"View shared content",view_starred_content:"View starred content",view_trash:"View trash",close_modal:"Close modal",delete_selected_content:"Delete selected content",open_close_account_menu:"Open / Close account menu",download_current_folder:"Download current folder"},account:{title:"Your Account",icons8_message:"Some folder and file icons are provided by",add_files:"Add files",add_folder:"Add folder",create_file:"Create file",create_folder:"Create folder",shared:"Shared",starred:"Starred",recents:"Recents",trash:"Trash",empty_trash:"Empty trash",create_vault:"Create vault",display_image:"Display image",display_pdf:"Display PDF",validate_xml:"Validate XML",validate_json:"Validate JSON",image_address:"Image address",what_is_taking_up_space:"What's taking up space?",upgrade_plan:"Upgrade",goto:"Go to your account",context_menu:{move:{impossible:"Impossible to move this item, there are no folders to move this into"}}},api:{messages:{file:{deleted:"File deleted permanently",restored:"File restored successfully",moved_to_trash:"File moved to trash",downloading:"Downloading"},folder:{deleted:"Folder deleted permanently",restored:"Folder restored successfully",moved_to_trash:"Folder moved to trash",empty:"This folder is empty",no_search_results:"There are no elements matching this",compressing:"Creating compressed folder",choose_download_format:"Choose download format",offline:"You are currently offline",vault_empty:"The vault is empty",no_recents:"There are no recent files"},user:{not_enough_storage:"You do not have enough storage space for this file"},vault:{set_pin:"Set PIN",unlock:"Unlock vault",wrong_pin:"The entered PIN is wrong",pin_or_recovery_code:"PIN or Recovery Code"}},languages:{cloud_firestore_indexes:"Cloud Firestore Indexes",cloud_firestore_security_rules:"Cloud Firestore Security Rules",document:"Document",file:"File",folder:"Folder",image:"Image"}},cookie_banner:{text:"We use cookies so that Denvelope works for you. By using our website, you agree with our use of cookies.",learn_more:"Learn more"},cookies:{text:"Cookies are small data files sent to your browser when you visit a site. We use both our own cookies, as well as third-party cookies, to do a few different things",why:{access_services:"Log you in to our services",remember_settings:"Remember preferences and settings",secure_account:"Keep your account secure",improve_services:"Better understand how people are using our services and how we can improve"},opt_out:{title:"Opt-Out",text:"You can set your browser to not accept cookies, but this may limit your ability to use the Services."}},errors:{empty:"This field cannot be empty",offline:"You are offline. To complete this action you need an Internet connection",user_content:{already_exists:"An element with this name already exists"},vault_pin_too_short:"The vault PIN must be at least 4 characters long",invalid_url:"The entered URL is invalid",url_must_be_https:"The URL must use HTTPS"},generic:{contact_us:"Contact Us",cookies:"Cookies",privacy:"Privacy",terms:"Terms",view:"View",save:"Save",save_to_my_account:"Save to my account",share:"Share",sharing_options:"Sharing options",copy_shareable_link:"Copy shareable link",unshare:"Unshare",move:"Move",add_to_starred:"Add to Starred",remove_from_starred:"Remove from Starred",rename:"Rename",edit:"Edit",info:"Info",download:"Download",restore:"Restore",delete:"Delete",close:"Close",back:"Back",settings:"Settings",sign_out:"Sign Out",load_more:"Load more",search:"Search",username:"Username",email:"Email",password:"Password",language:"Language",current:"Current",confirm:"Confirm",update:"Update",terms_of_service:"Terms of Service",privacy_policy:"Privacy Policy",cookie_policy:"Cookie Policy",version:"Version",account:"Account",name:"Name",folder:"Folder",folders:"Folders",file:"File",files:"Files",install:"Install",id:"ID",created:"Created",last_modified:"Last modified",type:"Type",size:"Size",shared:"Shared",starred:"Starred",position:"Position",keyboard_shortcut:"Keyboard shortcut",accessibility:"Accessibility",are_you_sure:"Are you sure?",vault:"Vault",lock:"Lock",unlock:"Unlock",no_errors_found:"No errors found",reset:"Reset",sign_in:"Sign In",example:"Example",reference:"Reference",default:"Default",yes:"Yes",no:"No",month:"Month",year:"Year",from:"From",to:"To",add:"Add",plans:"Plans",disable:"Disable",enable:"Enable",billing_period:"Billing period",coming_soon:"Coming soon"},header:{storage:{of:"of",used:"used"}},home:{title:"Denvelope",description:"Denvelope lets you store, edit and share your code in a simple, fast and reliable way",hero:{heading:"Say hello to your code's next home",subheading:"Denvelope is the perfect place to store, edit and share your code in a simple, fast and reliable way"},feature_section:{open_source:{title:"We are Open Source",description:"Denvelope is an and Open Source project."},store:{title:"Never lose your code again",description:"With Denvelope you can now store your code in a secure place. Never worry again about losing your projects."},view_edit:{title:"Access and edit your code from wherever you are",description:"Denvelope lets you view and edit your code from any device with the built-in code editor."},share:{title:"Need to share a piece of code or an entire project?",description:"With Denvelope you can just click a button and the link to that file or project is copied and ready to be shared. You can even hide files or folders inside a project if you don't want to share them but still want to share it."},vault:{title:"Vault",description:"Denvelope has a vault where you can store extremely important files."},pwa:{title:"Progressive Web App",description:"Denvelope is a PWA, this means you can install it basically everywhere. This has the advantage of the very small install size."}}},page_not_found:{title:"Page Not Found",description:"The specified file was not found on this website. Please check the URL for mistakes and try again."},pwa:{update_available:"Update available"},settings:{general:{title:"General",background:"Background",date_format:"Date format"},plan:{title:"Plan",change_plan:{title:"Change plan",change:"Change"},delete_plan:{title:"Delete plan",message:"The plan will be cancelled at the current period end"},payment_methods:{title:"Payment methods",set_as_default:"Set as default"},current_billing_period:"Current billing period",next_renewal:"Next renewal",next_period_plan:"Your plan after this period",next_billing_period:"Your next billing period",subscription_end:"Subscription end",no_payment_method:"You haven't added any payment method",reactivate_subscription:"Reactivate subscription",complete_payment:"Complete payment",cancel_downgrade:"Cancel downgrade",currency:"USD"},security:{title:"Security",sign_out_from_all_devices:"Sign Out from all devices",change_vault_pin:{current_or_recovery_code:"Current PIN or Recovery Code",new:"New PIN"},delete_vault:"Delete vault",vault:{change_pin:"Change PIN",generate_recovery_code:"Generate recovery code",recovery_code_info:"The recovery code expires after the first use"}},advanced:{title:"Advanced",delete_account:"Delete account",cache_size:"Cache size"},privacy:{title:"Privacy",clear_cache:{title:"Clear cache",clear:"Clear"},tracking:"Tracking"},info:{title:"Info"},changes_will_be_applied_at_the_next_page_load:"Changes will be applied at the next page load"},share:{check_out:"Check out",on_denvelope:"on Denvelope"},vault:{info:"If you delete an element inside the vault it will be deleted immediately, you won't be able to restore it."}},o={language:{name:"Italiano"},accessibility:{keyboard_shortcuts:"Scorciatoie da tastiera",view_account_content:"Vedi contenuti account",view_shared_content:"Vedi contenuti condivisi",view_starred_content:"Vedi contenuti preferiti",view_trash:"Vedi cestino",close_modal:"Chiudi modale",delete_selected_content:"Elimina contenuti selezionati",open_close_account_menu:"Apri / Chiudi menu account",download_current_folder:"Scarica cartella attuale"},account:{title:"Il tuo account",icons8_message:"Alcune icone di cartelle e file sono fornite da",add_files:"Aggiungi file",add_folder:"Aggiungi cartella",create_file:"Crea file",create_folder:"Crea cartella",shared:"Condivisi",starred:"Preferiti",recents:"Recenti",trash:"Cestino",empty_trash:"Svuota cestino",create_vault:"Crea cassaforte",display_image:"Mostra immagine",display_pdf:"Mostra PDF",validate_xml:"Valida XML",validate_json:"Valida JSON",image_address:"Indirizzo dell'immagine",what_is_taking_up_space:"Cosa occupa spazio?",upgrade_plan:"Effettua l'upgrade",goto:"Vai al tuo account",context_menu:{move:{impossible:"Impossibile spostare questo elemento, non ci sono cartelle in cui spostarlo"}}},api:{messages:{file:{deleted:"File eliminato permanentemente",restored:"File ripristinato con successo",moved_to_trash:"File spostato nel cestino",downloading:"Scaricando"},folder:{deleted:"Cartella eliminata permanentemente",restored:"Cartella ripristinata con successo",moved_to_trash:"Cartella spostata nel cestino",empty:"Questa cartella è vuota",no_search_results:"Non ci sono elementi corrispondenti a questo",compressing:"Creando cartella compressa",choose_download_format:"Scegli formato download",offline:"Sei attualmente offline",vault_empty:"La cassaforte è vuota",no_recents:"Non ci sono file recenti"},user:{not_enough_storage:"Non hai spazio di archiviazione sufficiente per questo file"},vault:{set_pin:"Imposta PIN",unlock:"Sblocca cassaforte",wrong_pin:"Il PIN inserito non è corretto",pin_or_recovery_code:"PIN o Codice di Recupero"}},languages:{cloud_firestore_indexes:"Indici di Cloud Firestore",cloud_firestore_security_rules:"Regole di Sicurezza di Cloud Firestore",document:"Documento",file:"File",folder:"Cartella",image:"Immagine"}},cookie_banner:{text:"Usiamo i cookie per rendere possibile il corretto funzionamento di Denvelope per te. Utilizzando il nostro sito, accetti le nostre modalità di utilizzo dei cookie.",learn_more:"Ulteriori informazioni"},cookies:{text:"I cookie sono piccoli file di dati inviati al tuo browser quando visiti un sito. Utilizziamo sia i nostri cookie che quelli di terze parti per varie finalità",why:{access_services:"Farti accedere ai nostri servizi",remember_settings:"Ricordare preferenze e impostazioni",secure_account:"Mantenere al sicuro il tuo account",improve_services:"Capire meglio in che modo gli utenti utilizzano i nostri servizi e migliorarli"},opt_out:{title:"Disattivazione",text:"Puoi impostare il tuo browser in modo che non accetti i cookie, ma ciò potrebbe limitare la possibilità di utilizzare i nostri Servizi."}},errors:{empty:"Questo campo non può essere vuoto",offline:"Sei offline. Per completare questa azione devi disporre di una connessione ad Internet",user_content:{already_exists:"Un elemento con questo nome esiste già"},vault_pin_too_short:"Il PIN della cassaforte deve avere almeno 4 caratteri",invalid_url:"L'URL inserito non è valido",url_must_be_https:"L'URL deve usare HTTPS"},generic:{contact_us:"Contattaci",cookies:"Cookie",privacy:"Privacy",terms:"Termini",view:"Vedi",save:"Salva",save_to_my_account:"Salva nel mio account",share:"Condividi",sharing_options:"Opzioni di condivisione",copy_shareable_link:"Copia link condivisibile",unshare:"Rimuovi condivisione",move:"Sposta",add_to_starred:"Aggiungi ai Preferiti",remove_from_starred:"Rimuovi dai Preferiti",rename:"Rinomina",edit:"Modifica",info:"Informazioni",download:"Scarica",restore:"Ripristina",delete:"Elimina",close:"Chiudi",back:"Indietro",settings:"Impostazioni",sign_out:"Esci",load_more:"Carica di più",search:"Cerca",username:"Nome utente",email:"Email",password:"Password",language:"Lingua",current:"Attuale",confirm:"Conferma",update:"Aggiorna",terms_of_service:"Termini di Servizio",privacy_policy:"Norme sulla Privacy",cookie_policy:"Norme sui Cookie",version:"Versione",account:"Account",name:"Nome",folder:"Cartella",folders:"Cartelle",file:"File",files:"File",install:"Installa",id:"ID",created:"Creato",last_modified:"Ultima modifica",type:"Tipo",size:"Dimensioni",shared:"Condiviso",starred:"Preferito",position:"Posizione",keyboard_shortcut:"Scorciatoia da tastiera",accessibility:"Accessibilità",are_you_sure:"Sei sicuro?",vault:"Cassaforte",lock:"Blocca",unlock:"Sblocca",no_errors_found:"Non sono stati trovati errori",reset:"Ripristina",sign_in:"Accedi",example:"Esempio",reference:"Riferimento",default:"Predefinito",yes:"Sì",no:"No",month:"Mese",year:"Anno",from:"Da",to:"A",add:"Aggiungi",plans:"Piani",disable:"Disabilita",enable:"Abilita",billing_period:"Periodo di fatturazione",coming_soon:"In arrivo"},header:{storage:{of:"di",used:"in uso"}},home:{title:"Denvelope",description:"Denvelope ti permette di salvare, modificare e condividere il tuo codice in modo semplice, veloce e affidabile",hero:{heading:"Saluta la nuova casa del tuo codice",subheading:"Denvelope è il posto perfetto per salvare, modificare e condividere il tuo codice in modo semplice, veloce e affidabile"},feature_section:{open_source:{title:"Noi siamo Open Source",description:"Denvelope è un progetto Open Source."},store:{title:"Non perdere più il tuo codice",description:"Con Denvelope puoi ora salvare il tuo codice in un posto sicuro. Non dovrai più preoccuparti di perdere i tuoi file o progetti."},view_edit:{title:"Visualizza e modifica il tuo codice da dovunque tu sia",description:"Denvelope ti permette di vedere e modificare il tuo codice da qualunque dispositivo con l'editor integrato."},share:{title:"Hai bisogno di condividere un pezzo di codice o un intero progetto?",description:"Con Denvelope puoi semplicemente cliccare un bottone e il link a quel file o progetto è copiato e pronto per essere condiviso. Puoi inoltre nascondere file o cartelle all'interno di un progetto se non vuoi che siano visibili ma vuoi comunque condividerlo."},vault:{title:"Cassaforte",description:"Denvelope dispone di una cassaforte, il posto perfetto per archiviare file di estrema importanza."},pwa:{title:"Progressive Web App",description:"Denvelope è una PWA, il che vuol dire che puoi installarlo praticamente ovunque. Questo ha il vantaggio delle piccolissime dimensioni di installazione."}}},page_not_found:{title:"Pagina Non Trovata",description:"Il file specificato non è stato trovato in questo sito. Controlla l'URL per eventuali errori e riprova."},pwa:{update_available:"Aggiornamento disponibile"},settings:{general:{title:"Generali",background:"Sfondo",date_format:"Formato della data"},plan:{title:"Piano",change_plan:{title:"Cambia piano",change:"Cambia"},delete_plan:{title:"Cancella piano",message:"Il piano verrà cancellato alla fine del periodo corrente"},payment_methods:{title:"Metodi di pagamento",set_as_default:"Imposta come predefinito"},current_billing_period:"Periodo di fatturazione attuale",next_renewal:"Prossimo rinnovo",next_period_plan:"Il tuo piano dopo questo periodo",next_billing_period:"Il tuo prossimo periodo di fatturazione",subscription_end:"Fine sottoscrizione",no_payment_method:"Non hai aggiunto nessun metodo di pagamento",reactivate_subscription:"Riattiva sottoscrizione",complete_payment:"Completa pagamento",cancel_downgrade:"Annulla downgrade",currency:"EUR"},security:{title:"Sicurezza",sign_out_from_all_devices:"Esci da tutti i dispositivi",change_vault_pin:{current_or_recovery_code:"PIN attuale o Codice di Recupero",new:"Nuovo PIN"},delete_vault:"Elimina cassaforte",vault:{change_pin:"Cambia PIN",generate_recovery_code:"Genera codice di recupero",recovery_code_info:"Il codice di recupero scade dopo il primo utilizzo"}},advanced:{title:"Avanzate",delete_account:"Elimina account",cache_size:"Dimensioni cache"},privacy:{title:"Privacy",clear_cache:{title:"Svuota cache",clear:"Svuota"},tracking:"Tracciamento"},info:{title:"Informazioni"},changes_will_be_applied_at_the_next_page_load:"Le modifiche saranno applicate al prossimo caricamento di pagina"},share:{check_out:"Guarda",on_denvelope:"su Denvelope"},vault:{info:"Se elimini un elemento all'interno della cassaforte questo sarà eliminato immediatamente, e non potrà più essere recuperato."}},r=n(0),i=n(3);const l=firebase.firestore();class s{static get Language(){return localStorage.getItem("lang").toLowerCase()}static get Currency(){return s.Get("settings->plan->currency")}}s.Init=e=>{let t=e;t||(["/en","/it"].includes(location.pathname)?t=location.pathname.substr(1):localStorage.getItem("lang")?t=localStorage.getItem("lang"):navigator.languages?[t]=navigator.languages:t=navigator.language?navigator.language:"en"),s.IsSupportedLanguage(t)||(t="en"),localStorage.setItem("lang",t),document.documentElement.lang=s.Language;const n=Array.from(new Set(Array.from(document.querySelectorAll("[data-translation], [data-placeholder-translation], [data-content-translation], [data-aria-label-translation], [data-start-translation], [data-only-translation]")).map(e=>e.getAttribute("data-translation")||e.getAttribute("data-placeholder-translation")||e.getAttribute("data-content-translation")||e.getAttribute("data-aria-label-translation")||e.getAttribute("data-start-translation")||e.getAttribute("data-only-translation"))));document.querySelectorAll("[data-use=translation]").forEach(e=>e.remove()),n.forEach(e=>document.querySelectorAll(`[data-translation="${e}"]`).forEach(t=>t.appendChild(s.GetElement(e,{initialSpace:!0})))),n.forEach(e=>document.querySelectorAll(`[data-placeholder-translation="${e}"]`).forEach(t=>{t.placeholder=s.Get(e)})),n.forEach(e=>document.querySelectorAll(`[data-content-translation="${e}"]`).forEach(t=>{t.content=s.Get(e)})),n.forEach(e=>document.querySelectorAll(`[data-aria-label-translation="${e}"]`).forEach(t=>t.setAttribute("aria-label",s.Get(e)))),n.forEach(e=>document.querySelectorAll(`[data-start-translation="${e}"]`).forEach(t=>t.insertAdjacentElement("afterbegin",s.GetElement(e)))),n.forEach(e=>document.querySelectorAll(`[data-only-translation="${e}"]`).forEach(t=>{t.innerText=s.Get(e)})),Object(r.e)("translationlanguagechange"),i.a.IsSignedIn&&l.collection(`users/${i.a.UserId}/config`).doc("preferences").set({language:s.Language},{merge:!0})},s.Get=e=>{const t=e.split("->");let n;switch(s.Language){case"it-it":case"it":n=o;break;default:n=a}for(let e=0;e<t.length-1;e++)n=n[t[e]];return n[t[t.length-1]]},s.GetElement=(e,t={initialSpace:!1})=>{const n=document.createElement("span");return n.setAttribute("data-use","translation"),n.innerText=(t.initialSpace?" ":"")+s.Get(e),n},s.IsSupportedLanguage=e=>["en","en-us","it","it-it"].includes(e.toLowerCase())},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),o=n(4),r=n(2);class i{static get CurrentUser(){return i.auth.currentUser}static get UserId(){return i.sharedContentUserId||i.CurrentUser.uid}}i.auth=firebase.auth(),i.analytics=firebase.analytics(),i.sharedContentUserId=null,i.IsAuthenticated=!1,i.IsSignedIn=!1,i.SignOut=()=>{i.auth.signOut(),Object(a.c)(),location.href="/"},i.DeleteUser=()=>{let e;switch(i.auth.currentUser.providerData[0].providerId){case firebase.auth.GoogleAuthProvider.PROVIDER_ID:e=new firebase.auth.GoogleAuthProvider;break;case firebase.auth.FacebookAuthProvider.PROVIDER_ID:e=new firebase.auth.FacebookAuthProvider;break;case firebase.auth.TwitterAuthProvider.PROVIDER_ID:e=new firebase.auth.TwitterAuthProvider;break;case firebase.auth.GithubAuthProvider.PROVIDER_ID:e=new firebase.auth.GithubAuthProvider;break;case"yahoo.com":e=new firebase.auth.OAuthProvider("yahoo.com");break;case"microsoft.com":e=new firebase.auth.OAuthProvider("microsoft.com")}i.auth.signInWithPopup(e).then(e=>i.auth.currentUser.reauthenticateWithCredential(e.credential).then(()=>i.auth.currentUser.delete()))},i.Init=()=>{i.auth.app.options.authDomain="denvelope.com",i.auth.useDeviceLanguage(),i.auth.onAuthStateChanged(e=>i.AuthStateChanged(e))},i.RefreshToken=async()=>{await i.auth.currentUser.getIdToken(!0)},i.AuthStateChanged=async e=>{var t;null===(t=document.querySelector(".waiting-user"))||void 0===t||t.remove(),location.href.indexOf("/shared/")>-1&&(i.sharedContentUserId=location.href.split("/")[location.href.split("/").length-1],i.sharedContentUserId.indexOf("/")>-1&&i.sharedContentUserId.substr(0,i.sharedContentUserId.indexOf("/"))),e?(i.IsAuthenticated=null===i.sharedContentUserId||e.uid===i.sharedContentUserId,i.IsSignedIn=!0,o.e.innerText=e.email,o.g.forEach(e=>{e.src="/assets/img/icons/user.svg"}),e.displayName&&(o.f.innerText=e.displayName),e.photoURL&&await fetch(e.photoURL).then(()=>o.g.forEach(t=>{t.src=e.photoURL})).catch(e=>e)):(i.IsAuthenticated=!1,i.IsSignedIn=!1,"/"!==location.pathname&&-1===location.href.indexOf("/shared/")&&!Object(a.p)(document.documentElement.querySelector("main.error"))&&(location.pathname.indexOf("/account")>-1||location.pathname.indexOf("/settings")>-1)?location.href="/":i.LoadFirebaseUi()),i.IsSignedIn?(Object(a.s)(document.documentElement,"signed-out"),Object(a.a)(document.documentElement,"signed-in")):(Object(a.s)(document.documentElement,"signed-in"),Object(a.a)(document.documentElement,"signed-out")),Object(a.e)("userready")},i.LoadFirebaseUi=()=>{const e=document.createElement("script");e.src=`https://www.gstatic.com/firebasejs/ui/4.5.1/firebase-ui-auth__${r.a.Language.substr(0,2)}.js`,e.onload=()=>{const e={signInSuccessUrl:"/"===location.pathname?"account":"",callbacks:{signInSuccessWithAuthResult:e=>(i.analytics.setUserId(e.user.uid),i.analytics.logEvent(e.additionalUserInfo.isNewUser?"sign_up":"login",{method:e.additionalUserInfo.providerId}),!0)},signInOptions:[{provider:firebase.auth.GoogleAuthProvider.PROVIDER_ID,authMethod:"https://accounts.google.com",clientId:"1023448327269-h54u9u95f2cqs7m1bceqh9h0p1dskcmk.apps.googleusercontent.com"},firebase.auth.FacebookAuthProvider.PROVIDER_ID,firebase.auth.TwitterAuthProvider.PROVIDER_ID,firebase.auth.GithubAuthProvider.PROVIDER_ID,"yahoo.com","microsoft.com"],credentialHelper:firebaseui.auth.CredentialHelper.GOOGLE_YOLO,tosUrl:"terms",privacyPolicyUrl:()=>window.location.assign("privacy")},t=new firebaseui.auth.AuthUI(i.auth);t.disableAutoSignIn(),t.start(".firebaseui-auth-container",e)},document.body.append(e)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return h}));var a=n(0);const o=document.querySelector("header"),r=o.querySelector(".menu-toggle button"),i=document.querySelector(".menu-container"),l=i.querySelector(".menu"),s=l.querySelector(".upgrade-plan"),c=l.querySelector(".storage-info"),d=l.querySelector(".sign-out"),u=document.querySelectorAll("[data-update-field=photo]"),m=document.querySelector("[data-update-field=name]"),p=document.querySelector("[data-update-field=email]"),h=()=>Object(a.m)(i);r.addEventListener("click",()=>"flex"===i.style.display?h():Object(a.u)(i,"flex")),document.addEventListener("click",e=>{const t=e.target;l.contains(t)||r.contains(t)||h()})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return s}));var a=n(0),o=n(1),r=n(2);class i{constructor(e){switch(this.container=document.querySelector(".modal-container").cloneNode(!0),this.element=this.container.querySelector(".modal"),this.spinner=this.element.querySelector(".spinner"),this.Content=this.element.querySelector(".content"),this.CloseButton=this.element.querySelector(".close"),this.ConfirmButton=this.element.querySelector(".confirm"),this.UpdateButton=this.element.querySelector(".update"),this.Show=e=>{var t;this.CloseButton.addEventListener("click",()=>{this.Hide(),this.Remove()}),this.ConfirmButton.addEventListener("click",this.OnConfirm),this.UpdateButton.addEventListener("click",this.OnUpdate),Object(a.p)(e)&&e?document.querySelectorAll(".modal.show:not(.keep-alive)").forEach(e=>e.parentElement.remove()):Object(a.a)(this.element,"keep-alive"),Object(a.l)(this.element,"show")||(Object(a.u)(this.container),Object(a.s)(this.element,"hide"),Object(a.a)(this.element,"show")),this.CloseButton.focus(),"none"===getComputedStyle(this.ConfirmButton).getPropertyValue("display")||this.ConfirmButton.disabled?"none"===getComputedStyle(this.UpdateButton).getPropertyValue("display")||this.UpdateButton.disabled||this.UpdateButton.focus():this.ConfirmButton.focus(),null===(t=this.Content.querySelector("input, select, button"))||void 0===t||t.focus(),document.addEventListener("mouseup",this.HideOnOuterClick),window.addEventListener("keydown",e=>{const t=e.key.toLowerCase();["escape"].includes(t)&&e.preventDefault(),"escape"===t&&this.HideAndRemove()})},this.Hide=()=>{Object(a.s)(this.element,"show"),Object(a.a)(this.element,"hide"),setTimeout(()=>Object(a.m)(this.container),1e3*getComputedStyle(this.element).getPropertyValue("animation-duration").replace(/[a-z]+/g,""))},this.Remove=()=>{this.OnClose(),setTimeout(()=>this.container.remove(),1e3*getComputedStyle(this.element).getPropertyValue("animation-duration").replace(/[a-z]+/g,"")),document.removeEventListener("click",this.HideOnOuterClick)},this.HideAndRemove=()=>{this.Hide(),this.Remove()},this.AppendContent=e=>{Object(a.m)(this.spinner),e.filter(a.p).forEach(e=>this.Content.append(e)),this.Content.querySelectorAll("input:not([type=checkbox])").forEach(e=>e.addEventListener("keydown",e=>{"Enter"===e.key&&(this.ConfirmButton.click(),this.UpdateButton.click())}))},this.RemoveContent=()=>{Object(a.u)(this.spinner,"block"),this.Content.innerHTML=""},this.HideOnOuterClick=e=>{this.element.contains(e.target)||Object(a.l)(this.element,"keep-alive")||this.HideAndRemove()},(null==e?void 0:e.titleTranslationId)&&(this.TitleTranslationId=e.titleTranslationId),(null==e?void 0:e.title)&&(this.Title=e.title),(null==e?void 0:e.subtitleTranslationId)&&(this.SubtitleTranslationId=e.subtitleTranslationId),(null==e?void 0:e.subtitle)&&(this.Subtitle=e.subtitle),null==e?void 0:e.action){case"confirm":Object(a.u)(this.ConfirmButton,"block");break;case"update":Object(a.u)(this.UpdateButton,"block")}(null==e?void 0:e.floating)&&(Object(a.a)(this.element,"floating"),Object(a.a)(this.container,"no-background")),!1===(null==e?void 0:e.animate)&&Object(a.a)(this.element,"no-animate"),(null==e?void 0:e.aside)&&Object(a.a)(this.element,"aside"),!1===(null==e?void 0:e.loading)?Object(a.m)(this.spinner):Object(a.u)(this.spinner,"block"),this.OnClose=this.OnConfirm=this.OnUpdate=()=>{},document.body.appendChild(this.container)}set Title(e){this.element.querySelector(".title").innerText=e}set Subtitle(e){this.element.querySelector(".subtitle").innerText=e}set TitleTranslationId(e){this.element.querySelector(".title").appendChild(r.a.GetElement(e))}set SubtitleTranslationId(e){this.element.querySelector(".subtitle").appendChild(r.a.GetElement(e))}}class l extends i{constructor(e,t){super({subtitle:e,floating:!0,animate:!1,aside:!0}),this.AppendContent([new o.a("div",{class:"transfer-info",children:[new o.a("div",{class:"progress-bar-container",children:[this.ProgressBar=new o.a("span",{class:"progress-bar"}).element]}).element,new o.a("p",{class:"status",children:[this.TransferSize=new o.a("span",{class:"transfer-size",innerText:0}).element,new o.a("span",{class:"tot-size",innerText:` / ${Object(a.g)(t)}`}).element]}).element]}).element,new o.a("div",{class:"upload-controls",children:[new o.a("button",{class:"pause upload-control",children:[new o.a("i",{class:"fas fa-pause fa-fw"}).element]}).element,new o.a("button",{class:"resume upload-control",children:[new o.a("i",{class:"fas fa-play fa-fw"}).element]}).element,new o.a("button",{class:"cancel upload-control",children:[new o.a("i",{class:"fas fa-times fa-fw"}).element]}).element]}).element]);const n=this.element.querySelector(".pause"),r=this.element.querySelector(".resume"),i=this.element.querySelector(".cancel");n.addEventListener("click",()=>{Object(a.m)(n),Object(a.u)(r,"block"),this.OnPause()}),r.addEventListener("click",()=>{Object(a.m)(r),Object(a.u)(n,"block"),this.OnResume()}),i.addEventListener("click",this.OnCancel),this.Show()}}class s extends i{constructor(e,t){super({subtitle:`${r.a.Get("api->messages->file->downloading")}: ${e}`,floating:!0,animate:!1,aside:!0}),this.AppendContent([new o.a("div",{class:"transfer-info",children:[new o.a("div",{class:"progress-bar-container",children:[this.ProgressBar=new o.a("span",{class:"progress-bar"}).element]}).element,new o.a("p",{class:"status",children:[this.TransferSize=new o.a("span",{class:"transfer-size",innerText:0}).element,new o.a("span",{class:"tot-size",innerText:` / ${Object(a.g)(t)}`}).element]}).element]}).element]),this.Show()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n(0);const o=document.querySelector(".generic-message"),r=o.querySelector("p"),i=o.querySelector(".action"),l=o.querySelector(".dismiss");let s;const c=(e,t,n=2e3)=>new Promise(c=>{r.innerText=e,Object(a.p)(t)?(i.innerText=t,Object(a.u)(i,"block")):Object(a.m)(i),Object(a.u)(o,"flex"),n>=0&&(s=setTimeout(u,n)),l.addEventListener("click",()=>{clearTimeout(s),u()}),i.addEventListener("click",()=>{c(),clearTimeout(s),u()})}),d=()=>{c("",null,-1),Object(a.m)(l),Object(a.u)(o.querySelector(".spinner"),"block")},u=()=>Object(a.m)(o)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2);class o{}o.Init=()=>{const e=Array.from(document.querySelectorAll("[data-keyboard-shortcut]"));e.forEach(e=>{e.title=`${a.a.Get("generic->keyboard_shortcut")}: ${e.getAttribute("data-keyboard-shortcut").replace("control","ctrl").split("+").join(" + ").toUpperCase()}`}),window.addEventListener("keydown",t=>{const n=t.key.toLowerCase();if(["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;const a=(t.ctrlKey&&"control"!==n?"control+":"")+(t.shiftKey&&"shift"!==n?"shift+":"")+n,o=e.find(e=>e.getAttribute("data-keyboard-shortcut")===a);o&&("enter"!==a&&t.preventDefault(),o instanceof HTMLButtonElement||o instanceof HTMLAnchorElement?o.click():o instanceof HTMLInputElement&&o.focus())})},o.Register=(e,t,n={ignoreInInput:!0})=>{window.addEventListener("keydown",a=>{const o=a.key.toLowerCase();if(n.ignoreInInput&&["input","textarea"].includes(document.activeElement.tagName.toLowerCase()))return;const r=(a.ctrlKey&&"control"!==o?"control+":"")+(a.shiftKey&&"shift"!==o?"shift+":"")+o;e===r&&(a.preventDefault(),t(a))})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,o=n(9);!function(e){e.Pricing=class{static Plan(e){return new r(o[e])}}}(a||(a={}));class r{constructor(e){this.plan=e}Price(e,t){return this.plan.price[e][t]}}},function(e){e.exports=JSON.parse('{"100MB":{"price":{"USD":{"month":0,"year":0},"EUR":{"month":0,"year":0}}},"1GB":{"price":{"USD":{"month":2,"year":20},"EUR":{"month":2,"year":20}}},"10GB":{"price":{"USD":{"month":10,"year":100},"EUR":{"month":10,"year":100}}}}')},function(e,t,n){"use strict";var a=n(0),o=n(3),r=n(4),i=n(6),l=n(2);class s{}s.analytics=firebase.analytics(),s.Register=()=>{if(!navigator.serviceWorker)return;let e,t;window.addEventListener("load",()=>navigator.serviceWorker.register("/sw.js").then(e=>{navigator.serviceWorker.controller&&(e.waiting?s.UpdateReady(e.waiting):e.installing?s.TrackInstalling(e.installing):e.addEventListener("updatefound",()=>s.TrackInstalling(e.installing)))})),navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(window.location.reload(),e=!0)});const n=document.querySelector(".install-pwa"),o=document.querySelector(".install-pwa + hr");window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t=e,Object(a.v)([n,o],"block")}),window.addEventListener("appinstalled",()=>s.analytics.logEvent("install")),n.addEventListener("click",()=>{t.prompt(),t.userChoice.then(e=>{"accepted"===e.outcome&&Object(a.n)([n,o]),t=null})})},s.TrackInstalling=e=>e.addEventListener("statechange",()=>{"installed"===e.state&&s.UpdateReady(e)}),s.UpdateReady=e=>i.a(l.a.Get("pwa->update_available"),l.a.Get("generic->update"),-1).then(()=>{i.b(),s.analytics.logEvent("update"),firebase.firestore().terminate(),e.postMessage({action:"skipWaiting"})});var c=n(5),d=n(7),u=n(8);t.a=()=>{var e,t,n;const i=firebase.firestore(),m=firebase.analytics(),p=parseInt(localStorage.getItem("cache-size"),10);p&&i.settings({cacheSizeBytes:p,ignoreUndefinedProperties:!0}),i.enablePersistence({synchronizeTabs:!0}),s.Register(),(document.body.classList.contains("account")||document.body.classList.contains("settings"))&&(document.body.style.backgroundImage=`url(${null!==(e=localStorage.getItem("background-image-url"))&&void 0!==e?e:""})`);const h=()=>document.querySelectorAll(".plans .plan").forEach(e=>{const t=document.querySelector(".billing-periods .selected").classList[0];e.querySelector(".price").innerText=Intl.NumberFormat(l.a.Language,{style:"currency",currency:l.a.Currency,minimumFractionDigits:0}).format(u.a.Pricing.Plan(e.getAttribute("data-max-storage")).Price(l.a.Currency,t)).replace(/\s/,""),e.querySelector(".billing-period").innerText=` / ${l.a.Get(`generic->${t}`).toLowerCase()}`,e.querySelector(".storage").innerText=e.getAttribute("data-max-storage")});window.addEventListener("translationlanguagechange",h),Array.from(null!==(n=null===(t=document.querySelector(".billing-periods"))||void 0===t?void 0:t.children)&&void 0!==n?n:[]).forEach(e=>e.addEventListener("click",()=>{var t;null===(t=e.parentElement.querySelector(".selected"))||void 0===t||t.classList.remove("selected"),Object(a.a)(e,"selected"),h()})),l.a.Init(),d.a.Init();const g=document.querySelector("#change-language .edit"),f=document.querySelector("#language-select");null==g||g.addEventListener("click",()=>{const e=new c.b({titleTranslationId:"generic->language",action:"confirm"});e.AppendContent([f]),f.selectedIndex=f.querySelector(`[value^=${l.a.Language}]`).index,e.OnConfirm=async()=>{l.a.Init(f.selectedOptions[0].value),e.HideAndRemove()},e.Show(!0)}),o.a.Init(),Object(a.q)();const v=document.querySelector(".cookie-banner");localStorage.getItem("cookie-consent")||(Object(a.u)(v,"flex"),v.querySelector("i:last-child").addEventListener("click",()=>Object(a.m)(document.querySelector(".cookie-banner")))),localStorage.setItem("cookie-consent","true"),Object(a.r)(),document.addEventListener("contextmenu",e=>{null===e.target.closest(".allow-context-menu")&&e.preventDefault()});const b=document.querySelector(".firebaseui-auth-container");document.querySelectorAll(".sign-in").forEach(e=>e.addEventListener("click",()=>{b.style.display="flex"})),b.addEventListener("click",e=>{const t=e.target;["button","a","p"].includes(t.tagName.toLowerCase())||(b.style.display="none")}),r.c.addEventListener("click",()=>o.a.SignOut()),window.addEventListener("load",()=>Object(a.s)(document.body,"preload")),d.a.Register("h",()=>{location.href="/"}),window.addEventListener("userready",()=>{o.a.IsAuthenticated&&(i.collection(`users/${o.a.UserId}/config`).doc("preferences").onSnapshot(e=>{var t,n,a,o,r;if(location.pathname.startsWith("/account")||location.pathname.startsWith("/settings")){const n=null===(t=e.data())||void 0===t?void 0:t.backgroundImageUrl;document.body.style.backgroundImage=n?`url(${n})`:"",localStorage.setItem("background-image-url",n)}const i=null!==(a=null===(n=e.data())||void 0===n?void 0:n.trackingEnabled)&&void 0!==a?a:!navigator.doNotTrack&&!window.doNotTrack;localStorage.setItem("tracking-enabled",`${i}`),m.setAnalyticsCollectionEnabled(i),l.a.Init(null!==(r=null===(o=e.data())||void 0===o?void 0:o.language)&&void 0!==r?r:l.a.Language)}),i.collection("users").doc(o.a.UserId).onSnapshot(e=>{if(!e.exists)return;const{usedStorage:t}=e.data(),{maxStorage:n}=e.data(),o=`${+(t/n*100).toFixed(2)}%`,i=document.querySelector("[data-update-field=used-storage]"),l=document.querySelector("[data-update-field=max-storage]");i.innerHTML=Object(a.g)(t),i.setAttribute("data-bytes",t),l.innerHTML=Object(a.g)(n),l.setAttribute("data-bytes",n),document.querySelector("[data-update-field=used-storage-percent]").innerHTML=`(${o})`,document.querySelector(".storage .used").style.width=o,t>0?Object(a.u)(r.h):Object(a.m)(r.h),Object(a.o)(n)?Object(a.u)(r.d):Object(a.m)(r.d)}))})}},,function(e,t,n){"use strict";n.r(t);var a=n(10),o=n(0),r=n(5),i=n(3),l=n(2),s=n(1),c=n(6),d=n(4),u=n(8);Object(a.a)();const m=firebase.firestore(),p=firebase.app().functions("europe-west1"),h=firebase.analytics(),g=Stripe("pk_live_t7rK1HslRtmyqcEo0C3JfmLz00blc0Ik6P",{locale:l.a.Language}),f=g.elements({fonts:[{family:"Source Code Variable",src:"url(/assets/font/SourceCodeVariable.woff2)"}],locale:l.a.Language}),v=g.paymentRequest({country:"IT",currency:l.a.Currency.toLowerCase(),total:{label:"Denvelope",amount:0}});window.addEventListener("translationlanguagechange",()=>{var e;const t=null===(e=L.querySelector(".selected"))||void 0===e?void 0:e.getAttribute("data-max-storage");t&&v.update({currency:l.a.Currency.toLowerCase(),total:{label:`Denvelope ${t}`,amount:100*u.a.Pricing.Plan(t).Price(l.a.Currency,document.querySelector(".billing-periods .selected").classList[0])}})}),v.on("paymentmethod",async e=>{const t=e.paymentMethod.id;await p.httpsCallable("createSubscription")({maxStorage:L.querySelector(".selected").getAttribute("data-max-storage"),currency:l.a.Currency,billingPeriod:document.querySelector(".billing-periods .selected").classList[0],paymentMethod:t}),e.complete("success")});let b,y=!1;const _=document.querySelector(".settings-menu"),S=_.querySelectorAll("button"),w=document.querySelectorAll(".settings-section"),k=document.querySelector("#change-background .edit"),C=document.querySelector("#change-background .reset"),E=document.querySelector("#date-format .edit"),O=document.querySelector("#date-format .reset"),q=document.querySelector("#change-plan .change"),I=document.querySelector("#change-plan .delete"),A=document.querySelector("#change-plan .cancel-downgrade"),x=document.querySelector("#change-plan .reactivate"),L=document.querySelector("#change-plan .plans"),T=document.querySelector("#payment-methods .add"),j=document.querySelector("#change-plan .current-plan .value"),P=document.querySelector("#change-plan .current-billing-period .value"),D=document.querySelector("#change-plan .next-renewal .value"),U=document.querySelector("#change-plan .next-period-plan .value"),R=document.querySelector("#change-plan .next-billing-period .value"),z=document.querySelector("#change-plan .complete-payment"),N=document.querySelector("#payment-methods .payment-methods-container"),$=document.querySelector("#payment-methods .no-payment-method"),G=f.create("paymentRequestButton",{paymentRequest:v,style:{paymentRequestButton:{type:"default",theme:"dark",height:"49px"}}});G.on("click",e=>{q.disabled&&e.preventDefault()}),(async()=>{await v.canMakePayment()?G.mount("#payment-request-button"):Object(o.m)(document.getElementById("payment-request-button"))})(),L.querySelectorAll(".plan").forEach(e=>{const t=()=>{var t;const n=L.querySelector(".current"),a=L.querySelector(".selected");if(null==a||a.classList.remove("selected"),a!==e){Object(o.a)(e,"selected");const t=e.getAttribute("data-max-storage");v.update({currency:l.a.Currency.toLowerCase(),total:{label:`Denvelope ${t}`,amount:100*u.a.Pricing.Plan(t).Price(l.a.Currency,document.querySelector(".billing-periods .selected").classList[0])}})}[n,L.querySelector(".selected")].every(e=>{var t;return null===(t=null==e?void 0:e.matches(":first-child"))||void 0===t||t})?q.disabled=!0:q.disabled=(null!==(t=L.querySelector(".selected"))&&void 0!==t?t:n)===n&&P.innerText===document.querySelector(".billing-periods .selected").innerText};e.addEventListener("click",t),e.addEventListener("keydown",e=>{"Enter"===e.key&&t()})}),Array.from(document.querySelector(".billing-periods").children).forEach(e=>e.addEventListener("click",()=>L.querySelector(".current").click()));const B=document.querySelector("#sign-out-from-all-devices .sign-out"),F=document.querySelector("#vault .change-pin"),M=document.querySelector("#vault .delete"),H=document.querySelector("#vault .generate-recovery-code"),V=document.querySelector("#cache-size .edit"),W=document.querySelector("#cache-size .reset"),Y=document.querySelector("#cache-size .current-cache-size .value"),K=document.querySelector("#delete-account .delete"),J=document.querySelector("#clear-cache .clear"),Z=document.querySelector("#tracking .update");let Q="general";location.pathname.indexOf("/settings/")>-1&&(Q=location.pathname.substr(10),Q.indexOf("/")>-1&&(Q=Q.substr(0,Q.indexOf("/"))),["general","plan","security","advanced","privacy","info"].includes(Q)||(Q="general")),[document.querySelector(`[data-sect=${Q}]`),document.querySelector(`#${Q}`)].forEach(e=>Object(o.a)(e,"selected"));const X=1e3*parseInt(document.querySelector("#cache-size .cache-size-options .default").value,10)*1e3;S.forEach(e=>{e.addEventListener("click",e=>{let t;t=e.target.querySelector("i")?e.target:e.target.parentNode,S.forEach(e=>Object(o.s)(e,"selected")),w.forEach(e=>Object(o.s)(e,"selected")),Object(o.a)(t,"selected");const n=t.getAttribute("data-sect");Object(o.a)(document.querySelector(`#${n}`),"selected"),history.pushState(null,"",`${location.origin}/settings/${n}`)})});const ee=()=>{w[0].parentElement.style.height=`${innerHeight-d.b.offsetHeight-_.offsetHeight}px`};ee(),window.addEventListener("resize",ee),window.addEventListener("userready",()=>{k.addEventListener("click",()=>{const e=new r.b({titleTranslationId:k.closest(".setting").querySelector("h1").getAttribute("data-translation"),action:"confirm"}),t=new s.c({attributes:{id:"background-image-url",placeholder:l.a.Get("account->image_address"),type:"url"},iconClassName:"fas fa-link fa-fw"}).element,n=t.querySelector("input");n.addEventListener("input",()=>{let t=!0;try{t="https:"===new URL(n.value).protocol}catch(e){t=!1}e.ConfirmButton.disabled=!t}),e.ConfirmButton.disabled=!0,e.AppendContent([t]),e.OnConfirm=()=>{Object(o.l)(n,"error")&&t.previousElementSibling.remove(),Object(o.s)(n,"error"),e.HideAndRemove(),m.collection(`users/${i.a.UserId}/config`).doc("preferences").set({backgroundImageUrl:n.value},{merge:!0})},e.Show(!0)}),C.addEventListener("click",()=>m.collection(`users/${i.a.UserId}/config`).doc("preferences").set({backgroundImageUrl:""},{merge:!0})),E.addEventListener("click",async()=>{const e=new r.b({titleTranslationId:E.closest(".setting").querySelector("h1").getAttribute("data-translation"),action:"confirm"}),t=document.querySelector("#date-format .date-format-options").cloneNode(!0);b&&"default"!==b&&Array.from(t.children).forEach(e=>{const n=e.querySelector("input[type=checkbox]"),a=e.querySelector("select").id;n&&(n.checked=!!b[a]),b[a]&&(t.querySelector(`#${a}`).selectedIndex=t.querySelector(`[value="${b[a]}"]`).index)}),e.AppendContent([new s.a("p",{children:[new s.a("span",{innerText:l.a.Get("generic->reference")}).element,new s.a("a",{innerText:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/DateTimeFormat",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/DateTimeFormat",target:"_blank"}).element]}).element,new s.a("p",{children:[new s.a("span",{innerText:l.a.Get("generic->example")}).element,new s.a("span",{id:"example-date",innerText:Object(o.f)(Date.now(),"default"!==b?b:null)}).element]}).element,t]);const n=()=>({weekday:t.querySelector("#show-weekday").checked?t.querySelector("#weekday").selectedOptions[0].value:void 0,era:t.querySelector("#show-era").checked?t.querySelector("#era").selectedOptions[0].value:void 0,year:t.querySelector("#year").selectedOptions[0].value,month:t.querySelector("#month").selectedOptions[0].value,day:t.querySelector("#day").selectedOptions[0].value,hour:t.querySelector("#hour").selectedOptions[0].value,minute:t.querySelector("#minute").selectedOptions[0].value,second:t.querySelector("#show-second").checked?t.querySelector("#second").selectedOptions[0].value:void 0,timeZoneName:t.querySelector("#show-timeZoneName").checked?t.querySelector("#timeZoneName").selectedOptions[0].value:void 0});[...t.querySelectorAll("select"),...t.querySelectorAll("input[type=checkbox]")].forEach(t=>t.addEventListener("change",()=>{e.Content.querySelector("#example-date").innerText=Object(o.f)(Date.now(),n())})),e.OnConfirm=()=>{m.collection(`users/${i.a.UserId}/config`).doc("preferences").set({dateFormatOptions:n()},{merge:!0}),e.HideAndRemove()},e.Show(!0)}),O.addEventListener("click",()=>m.collection(`users/${i.a.UserId}/config`).doc("preferences").set({dateFormatOptions:"default"},{merge:!0})),[q,T].forEach(e=>e.addEventListener("click",()=>{const t=new r.b({titleTranslationId:e.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:e.getAttribute("data-translation"),action:"confirm",loading:!1});let n;const a=!y||e===T;e===q&&t.AppendContent([new s.a("p",{children:[new s.a("span",{innerText:l.a.Get("generic->from")}).element,new s.a("span",{innerText:L.querySelector(".current > .storage").innerText}).element]}).element,new s.a("p",{children:[new s.a("span",{innerText:l.a.Get("generic->to")}).element,new s.a("span",{innerText:L.querySelector(".selected > .storage").innerText}).element]}).element]),a&&(t.ConfirmButton.disabled=!0,n=f.create("card",{style:{base:{iconColor:"#efcb68",color:"#efcb68",fontFamily:"Source Code Variable, monospace",fontSize:"16px","::placeholder":{color:"#efcb68"}},invalid:{iconColor:"red",color:"red"}},hidePostalCode:!1}),n.on("change",e=>{var n;t.ConfirmButton.disabled=!e.complete,null===(n=t.Content.querySelector(".input-error"))||void 0===n||n.remove(),e.error&&t.Content.insertAdjacentHTML("afterbegin",`<p class="input-error">${e.error.message}</p>`)}),n.on("ready",()=>n.focus()),t.AppendContent([document.createElement("div")]),n.mount(t.Content.querySelector("div"))),t.OnConfirm=async()=>{let o;t.HideAndRemove(),a&&(o=await g.createPaymentMethod({type:"card",card:n})),e===q?p.httpsCallable("createSubscription")({maxStorage:L.querySelector(".selected").getAttribute("data-max-storage"),currency:l.a.Currency,billingPeriod:document.querySelector(".billing-periods .selected").classList[0],paymentMethod:null==o?void 0:o.paymentMethod.id}):(p.httpsCallable("addPaymentMethod")({paymentMethod:o.paymentMethod.id}),h.logEvent("add_payment_info"))},t.Show(!0)})),I.addEventListener("click",()=>{const e=new r.b({titleTranslationId:I.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:I.getAttribute("data-translation"),action:"confirm",loading:!1});e.AppendContent([new s.a("p",{innerText:l.a.Get("settings->plan->delete_plan->message")}).element]),e.OnConfirm=()=>{p.httpsCallable("cancelSubscription")({}),e.HideAndRemove()},e.Show(!0)}),[A,x].forEach(e=>e.addEventListener("click",()=>{const t=new r.b({titleTranslationId:e.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:e.getAttribute("data-translation"),action:"confirm",loading:!1});t.OnConfirm=()=>{let n={};e===A&&(n={maxStorage:L.querySelector(".current").getAttribute("data-max-storage"),currency:l.a.Currency,billingPeriod:document.querySelector(".billing-periods .selected").classList[0]}),p.httpsCallable(e===A?"createSubscription":"reactivateSubscription")(n),t.HideAndRemove()},t.Show(!0)})),B.addEventListener("click",()=>{const e=new r.b({titleTranslationId:B.closest(".setting").querySelector("h1").getAttribute("data-translation"),action:"confirm",loading:!1});e.OnConfirm=()=>{p.httpsCallable("signOutUserFromAllDevices")({}),i.a.SignOut(),e.HideAndRemove()},e.Show(!0)}),F.addEventListener("click",()=>{const e=new r.b({titleTranslationId:F.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:F.getAttribute("data-translation"),action:"confirm",loading:!1}),t=new s.c({attributes:{id:"current-vault-pin",placeholder:l.a.Get("settings->security->change_vault_pin->current_or_recovery_code"),type:"password"},iconClassName:"fas fa-key fa-fw"}).element,n=new s.c({attributes:{id:"new-vault-pin",placeholder:l.a.Get("settings->security->change_vault_pin->new"),type:"password"},iconClassName:"fas fa-key fa-fw"}).element,a=t.querySelector("input"),i=n.querySelector("input");[a,i].forEach(t=>t.addEventListener("input",()=>{e.ConfirmButton.disabled=a.value.length<4||i.value.length<4})),e.ConfirmButton.disabled=!0,e.AppendContent([t,n]),e.OnConfirm=async()=>{const r=a.value,c=i.value;Object(o.l)(a,"error")&&t.previousElementSibling.remove(),Object(o.l)(i,"error")&&n.previousElementSibling.remove(),Object(o.s)(a,"error"),Object(o.s)(i,"error"),e.Hide(),p.httpsCallable("changeVaultPin")({currentPin:r,newPin:c}).then(n=>{n.data.success?e.Remove():(Object(o.a)(a,"error"),t.insertAdjacentElement("beforebegin",new s.a("p",{class:"input-error",innerText:l.a.Get("api->messages->vault->wrong_pin")}).element),e.Show(!0))})},e.Show(!0)}),M.addEventListener("click",()=>{const e=new r.b({titleTranslationId:M.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:M.getAttribute("data-translation"),action:"confirm"}),t=new s.c({attributes:{id:"vault-pin",placeholder:l.a.Get("api->messages->vault->pin_or_recovery_code"),type:"password"},iconClassName:"fas fa-key fa-fw"}).element,n=t.querySelector("input");n.addEventListener("input",()=>{e.ConfirmButton.disabled=n.value.length<4}),e.ConfirmButton.disabled=!0,e.AppendContent([t]),e.OnConfirm=async()=>{const a=n.value;Object(o.l)(n,"error")&&t.previousElementSibling.remove(),Object(o.s)(n,"error"),e.Hide(),p.httpsCallable("deleteVault")({pin:a}).then(a=>{a.data.success?e.Remove():(Object(o.a)(n,"error"),t.insertAdjacentElement("beforebegin",new s.a("p",{class:"input-error",innerText:l.a.Get("api->messages->vault->wrong_pin")}).element),e.Show(!0))})},e.Show(!0)}),H.addEventListener("click",()=>{const e=new r.b({titleTranslationId:H.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:H.getAttribute("data-translation"),action:"confirm"}),t=new s.c({attributes:{id:"vault-pin",placeholder:l.a.Get("api->messages->vault->pin_or_recovery_code"),type:"password"},iconClassName:"fas fa-key fa-fw"}).element,n=t.querySelector("input");n.addEventListener("input",()=>{e.ConfirmButton.disabled=n.value.length<4}),e.ConfirmButton.disabled=!0,e.AppendContent([new s.a("p",{class:"multiline",innerText:l.a.Get("settings->security->vault->recovery_code_info")}).element,t]),e.OnConfirm=async()=>{const a=n.value;Object(o.l)(n,"error")&&t.previousElementSibling.remove(),Object(o.s)(n,"error"),e.Hide(),p.httpsCallable("generateVaultRecoveryCode")({pin:a}).then(a=>{if(a.data.success){e.Remove();const t=URL.createObjectURL(new Blob([a.data.recoveryCode],{type:"text/plain"})),n=document.createElement("a");n.download="denvelope-vault-recovery-code.txt",n.href=t,document.body.appendChild(n),n.click(),n.remove()}else Object(o.a)(n,"error"),t.insertAdjacentElement("beforebegin",new s.a("p",{class:"input-error",innerText:l.a.Get("api->messages->vault->wrong_pin")}).element),e.Show(!0)})},e.Show(!0)}),V.addEventListener("click",()=>{const e=new r.b({titleTranslationId:V.closest(".setting").querySelector("h1").getAttribute("data-translation"),action:"confirm",loading:!1}),t=document.querySelector("#cache-size .cache-size-options").cloneNode(!0);t.querySelector(".default").innerText+=` (${l.a.Get("generic->default")})`;const n=parseInt(localStorage.getItem("cache-size"),10);n&&(t.selectedIndex=t.querySelector(`[value="${n/1e3/1e3}"]`).index),e.AppendContent([t]),e.OnConfirm=()=>{e.HideAndRemove(),te(1e3*parseInt(t.selectedOptions[0].value,10)*1e3),c.a(l.a.Get("settings->changes_will_be_applied_at_the_next_page_load"))},e.Show(!0)}),W.addEventListener("click",()=>{te(X),c.a(l.a.Get("settings->changes_will_be_applied_at_the_next_page_load"))}),K.addEventListener("click",()=>{const e=new r.b({titleTranslationId:K.closest(".setting").querySelector("h1").getAttribute("data-translation"),action:"confirm",loading:!1});e.OnConfirm=()=>{i.a.DeleteUser(),e.HideAndRemove()},e.Show(!0)}),J.addEventListener("click",o.d),Z.addEventListener("click",()=>{const e=new r.b({titleTranslationId:Z.closest(".setting").querySelector("h1").getAttribute("data-translation"),subtitleTranslationId:Z.getAttribute("data-translation"),action:"confirm",loading:!1});e.OnConfirm=()=>{m.collection(`users/${i.a.UserId}/config`).doc("preferences").update("trackingEnabled","enable"===Z.getAttribute("data-action")),e.HideAndRemove()},e.Show(!0)}),m.collection("users").doc(i.a.UserId).onSnapshot(e=>{var t,n,a,i,c,d,u,m,h;const{maxStorage:g}=e.data(),f=null===(t=e.data().stripe)||void 0===t?void 0:t.nextPeriodMaxStorage,v=null!==(a=null===(n=e.data().stripe)||void 0===n?void 0:n.billingPeriod)&&void 0!==a?a:"month",_=null===(i=e.data().stripe)||void 0===i?void 0:i.nextBillingPeriod,S=null===(c=e.data().stripe)||void 0===c?void 0:c.cancelAtPeriodEnd,w=null===(d=e.data().stripe)||void 0===d?void 0:d.nextRenewal,k=null===(u=e.data().stripe)||void 0===u?void 0:u.invoiceUrl;ne(g,v),I.disabled=Object(o.o)(g)||S,Object(o.n)([x,D.parentElement,U.parentElement,R.parentElement,N,$,z,A]),S&&Object(o.u)(x),Object(o.o)(g)||(D.innerHTML="",D.appendChild(new s.a("span",{data:{date:w},innerText:Object(o.f)(1e3*w,b)}).element),Object(o.u)(D.parentElement),S||(f&&f<g&&(U.innerText=Object(o.g)(f),Object(o.v)([U.parentElement,A])),_&&_!==v&&(R.setAttribute("data-only-translation",`generic->${_}`),R.innerText=l.a.Get(R.getAttribute("data-translation")),Object(o.u)(R.parentElement))));const C=null===(m=e.data().stripe)||void 0===m?void 0:m.paymentMethods;if(y=!!C&&(null==C?void 0:C.length)>0,y){const t=null===(h=e.data().stripe)||void 0===h?void 0:h.defaultPaymentMethod;N.innerHTML="",Object(o.u)(N);const n=(e,t)=>{N.innerHTML="",e.forEach(e=>{const n=e.id===t,a=new s.a("button",{class:"set-as-default",innerText:l.a.Get("settings->plan->payment_methods->set_as_default")}).element,i=new s.a("button",{class:"delete",children:[new s.a("i",{class:"fas fa-trash"}).element,new s.a("span",{innerText:` ${l.a.Get("generic->delete")}`}).element]}).element;N.appendChild(new s.a("div",{class:`cc-info ${n?"default":""}`,id:e.id,children:[new s.a("span",{children:[new s.a("i",{class:`fab fa-cc-${e.brand}`}).element]}).element,new s.a("span",{innerText:`••••${e.last4}`}).element,new s.a("span",{innerText:`${e.expirationMonth}/${e.expirationYear}`}).element,a,i]}).element),[a,i].forEach(t=>t.addEventListener("click",()=>{const n=new r.b({titleTranslationId:t.getAttribute("data-translation"),action:"confirm",loading:!1});n.OnConfirm=()=>{p.httpsCallable(t===a?"setDefaultPaymentMethod":"deletePaymentMethod")({paymentMethod:e.id}),n.HideAndRemove()},n.Show(!0)})),n&&(Object(o.o)(g)||(i.disabled=!0),a.disabled=!0,N.querySelector(`#${e.id} span:last-of-type`).insertAdjacentElement("afterend",new s.a("span",{innerText:`(${l.a.Get("generic->default")})`}).element))})};n(C,t),window.addEventListener("translationlanguagechange",()=>n(C,t))}else Object(o.u)($);k&&(Object(o.u)(z),z.href=k)}),m.collection(`users/${i.a.UserId}/config`).doc("preferences").onSnapshot(e=>{if(!e.data())return;const{backgroundImageUrl:t,dateFormatOptions:n,trackingEnabled:a}=e.data();C.disabled=!t,b=n,"default"===b&&(b=null),document.querySelectorAll("[data-date]").forEach(e=>{e.innerText=Object(o.f)(1e3*Number(e.getAttribute("data-date")),b)}),O.disabled=!b||"default"===b,Z.setAttribute("data-action",null==a||a?"disable":"enable"),Z.setAttribute("data-translation",`generic->${Z.getAttribute("data-action")}`),Z.innerText=` ${l.a.Get(Z.getAttribute("data-translation"))}`,Z.insertAdjacentElement("afterbegin",new s.a("i",{class:`fas fa-toggle-${"disable"===Z.getAttribute("data-action")?"off":"on"}`}).element)}),m.collection(`users/${i.a.UserId}/vault`).doc("status").onSnapshot(e=>{F.disabled=M.disabled=H.disabled=!e.exists,i.a.RefreshToken()})}),window.addEventListener("popstate",()=>{let e=window.location.href;Q="/"===e[e.length-1]?(e=e.substr(0,e.length-1)).substr(e.lastIndexOf("/")+1):e.substr(e.lastIndexOf("/")+1),document.querySelector(`button[data-sect=${"settings"===Q?"general":Q}]`).click()});const te=e=>{localStorage.setItem("cache-size",e.toString()),Y.innerText=`${e/1e3/1e3}MB`,W.disabled=null===e||X===e},ne=(e,t)=>{var n,a;j.innerText=Object(o.g)(e),P.setAttribute("data-only-translation",`generic->${t}`),P.innerText=l.a.Get(P.getAttribute("data-only-translation")),null===(n=L.querySelector(".current"))||void 0===n||n.classList.remove("current"),Object(o.a)(L.querySelector(`[data-max-storage="${Object(o.g)(e)}"]`),"current"),null===(a=L.querySelector(".selected"))||void 0===a||a.classList.remove("selected"),document.querySelector(`.billing-periods .${t}`).click(),q.disabled=!0};te(parseInt(localStorage.getItem("cache-size"),10)||X)}]);